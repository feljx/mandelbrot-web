!function(){var t={};var e=function(e){var n=t[e];if(null==n)throw new Error("Could not resolve bundle with id "+e);return n};function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(function(e){for(var n=Object.keys(e),r=0;r<n.length;r++)t[n[r]]=e[n[r]]})(JSON.parse('{"1155df4c77cdcfa0":"app.92517034.js","1a992f7aa8090575":"foo.13aaa2d2.wasm","df6cfa3ddc808332":"worker.4dc13bfc.js"}'));var r,o,i=function(){function t(e,n,r,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.iterations=e,this.zoom_factor=n,this.worker_num=r,this.task_num=o,this.axis_length_y=i,this.width=window.innerWidth,this.height=window.innerHeight,this.pixel_ratio=window.devicePixelRatio,this.real_width=~~(this.width*this.pixel_ratio),this.real_height=~~(this.height*this.pixel_ratio),this.pixel_num=this.real_height*this.real_width,this.axis_length_x=this.axis_length_y*(this.real_width/this.real_height),this.pixel_length=this.axis_length_y/this.real_height/Math.max(this.zoom_factor-1,1)*.8}var e,r,o;return e=t,(r=[{key:"set_zoom",value:function(t){this.zoom_factor=t,this.pixel_length=Math.abs(this.axis_length_y/this.real_height/this.zoom_factor)}}])&&n(e.prototype,r),o&&n(e,o),t}(),a=navigator.hardwareConcurrency>4,l=new i(2e3,1,navigator.hardwareConcurrency*(a?2:1),a?44:16,4),h=!1;function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function t(e,n,r,o,i){u(this,t),this.top=e,this.left=n,this.bot=r,this.right=o,this.pixel_length=i},d=function(){function t(){u(this,t),this.arr=[]}return f(t,[{key:"enq",value:function(t){t&&this.arr.push(t)}},{key:"deq",value:function(){if(this.arr[0])return this.arr.shift()}},{key:"peek",value:function(){return this.arr[0]}},{key:"clear",value:function(){this.arr.length=0}},{key:"shuffle",value:function(){for(var t=this.arr.length-1;t>0;t--){var e=Math.floor(Math.random()*(t+1)),n=[this.arr[e],this.arr[t]];this.arr[t]=n[0],this.arr[e]=n[1]}}}]),t}();function g(){return h||(h=!0,r={},o=A(),r=function(t){var e=o.getBundleURL()+t;return o.getOrigin(e)===self.location.origin?e:URL.createObjectURL(new Blob(["importScripts("+JSON.stringify(e)+");"]))}),r}var _,p,v,m,w,y,b=!1,x=!1;function z(){return m||(m=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return k(t[0])}return"/"}()),m}function k(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}function S(t){let e=(""+t).match(/(https?|file|ftp):\/\/[^/]+/);if(!e)throw new Error("Origin not found");return e[0]}function A(){return x||(x=!0,m=null,(v={}).getBundleURL=z,w=k,v.getBaseURL=w,y=S,v.getOrigin=y),v}var E,M,O,R,j=!1;function q(t){if(""===t)return".";var e="/"===t[t.length-1]?t.slice(0,t.length-1):t,n=e.lastIndexOf("/");return-1===n?".":e.slice(0,n)}function H(t,e){if(t===e)return"";var n=t.split("/");"."===n[0]&&n.shift();var r,o,i=e.split("/");for("."===i[0]&&i.shift(),r=0;(r<i.length||r<n.length)&&null==o;r++)n[r]!==i[r]&&(o=r);var a=[];for(r=0;r<n.length-o;r++)a.push("..");return i.length>o&&a.push.apply(a,i.slice(o)),a.join("/")}function L(){return j||(j=!0,E={},M=e,E=function(t,e){return H(q(M(t)),M(e))},O=q,E._dirname=O,R=H,E._relative=R),E}function T(){return b||(b=!0,_={},_=g()(L()("1155df4c77cdcfa0","df6cfa3ddc808332"))),_}function U(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}p=A().getBundleURL()+L()("1155df4c77cdcfa0","1a992f7aa8090575");var I,B=(I=p)&&I.__esModule?I.default:I;console.log(B),console.log(l);var D,F,P=WebAssembly.compileStreaming(fetch(B)),W=document.querySelector("canvas"),$=W.getContext("2d"),J=[],N=new d;function Y(){console.time(),F=!1,N.clear();for(var t=Math.floor(l.real_height/l.task_num),e=Math.ceil(l.real_width/t),n=Math.ceil(l.real_height/t),r=0;r<n-1;r++)for(var o=0;o<e-1;o++){var i=new s(r*t-1,o*t-1,(r+1)*t-1,(o+1)*t-1,l.pixel_length);N.enq(i)}for(var a=0;a<n-1;a++){var h=new s(a*t-1,l.real_width-t,(a+1)*t-1,l.real_width,l.pixel_length);N.enq(h)}for(var c=0;c<e-1;c++){var f=new s(l.real_height-t,c*t-1,l.real_height,(c+1)*t-1,l.pixel_length);N.enq(f)}var u=new s((n-1)*t-1,(e-1)*t-1,l.real_height,l.real_width,l.pixel_length);N.enq(u),N.shuffle();var d,g=U(J);try{for(g.s();!(d=g.n()).done;){var _=d.value;N.peek()&&_.postMessage(N.deq())}}catch(t){g.e(t)}finally{g.f()}}P.then((function(t){var e;e=window.devicePixelRatio,W.width=l.width*e,W.height=l.height*e,W.style.width="".concat(window.innerWidth,"px"),W.style.height="".concat(window.innerHeight,"px"),D=$.createImageData(l.real_width,l.real_height),new Uint32Array(D.data.buffer),function(t){for(var e=function(t){var e=new Worker(T(),{type:"module"});e.addEventListener("message",(function(t){var n=t.data;if(n.pixel_length===l.pixel_length&&window.requestAnimationFrame((function(){$.putImageData(new ImageData(n.bytes,n.right-n.left,n.bot-n.top),n.left,n.top)})),N.peek()){var r=N.deq();r&&e.postMessage(r)}else F||(F=!0,console.timeEnd())})),e.postMessage(l),J.push(e)},n=0;n<l.worker_num;n++)e()}(),Y()}));var Z,G,K,Q=(Z=function(t){t.deltaY<0?(l.set_zoom(l.zoom_factor+1),console.log("".concat(100*l.zoom_factor,"% Zoom")),Y()):l.zoom_factor>1&&(l.set_zoom(l.zoom_factor-1),console.log("".concat(100*l.zoom_factor,"% Zoom")),Y())},G=50,function(){K||(Z.apply(void 0,arguments),K=setTimeout((function(){return K=!1}),G))});!function(t,e,n){var r,o,i,a,l;function h(){var c=Date.now()-a;c<e&&c>=0?r=setTimeout(h,e-c):(r=null,n||(l=t.apply(i,o),i=o=null))}null==e&&(e=100);var c=function(){i=this,o=arguments,a=Date.now();var c=n&&!r;return r||(r=setTimeout(h,e)),c&&(l=t.apply(i,o),i=o=null),l};c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(l=t.apply(i,o),i=o=null,clearTimeout(r),r=null)}}((function(t){t.deltaY<0?(console.log(l.zoom_factor),l.set_zoom(l.zoom_factor+1),console.log(l.zoom_factor),Y()):l.zoom_factor>1&&(console.log(l.zoom_factor),l.set_zoom(l.zoom_factor-1),console.log(l.zoom_factor),Y())}),1e3,!0);window.addEventListener("wheel",Q)}();
//# sourceMappingURL=app.92517034.js.map
