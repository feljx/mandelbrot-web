!function(){var t={};var n=function(n){var e=t[n];if(null==e)throw new Error("Could not resolve bundle with id "+n);return e};(function(n){for(var e=Object.keys(n),r=0;r<e.length;r++)t[e[r]]=n[e[r]]})(JSON.parse('{"b2a3d5bd9ac83541":"main.51da864a.js","298f3186237b71bd":"mandel.13aaa2d2.wasm","27b0ff24fab2de3a":"worker.70e4b591.js"}'));var e,r,o,i,a,u=!1;function f(){return o||(o=function(){try{throw new Error}catch(n){var t=(""+n.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return c(t[0])}return"/"}()),o}function c(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}function l(t){let n=(""+t).match(/(https?|file|ftp):\/\/[^/]+/);if(!n)throw new Error("Origin not found");return n[0]}function h(){return u||(u=!0,o=null,(r={}).getBundleURL=f,i=c,r.getBaseURL=i,a=l,r.getOrigin=a),r}var s,p,d,_,y=!1;function v(t){if(""===t)return".";var n="/"===t[t.length-1]?t.slice(0,t.length-1):t,e=n.lastIndexOf("/");return-1===e?".":n.slice(0,e)}function g(t,n){if(t===n)return"";var e=t.split("/");"."===e[0]&&e.shift();var r,o,i=n.split("/");for("."===i[0]&&i.shift(),r=0;(r<i.length||r<e.length)&&null==o;r++)e[r]!==i[r]&&(o=r);var a=[];for(r=0;r<e.length-o;r++)a.push("..");return i.length>o&&a.push.apply(a,i.slice(o)),a.join("/")}function m(){return y||(y=!0,s={},p=n,s=function(t,n){return g(v(p(t)),p(n))},d=v,s._dirname=d,_=g,s._relative=_),s}e=h().getBundleURL()+m()("b2a3d5bd9ac83541","298f3186237b71bd");var b,w,x=!1;function S(t,n,e){return(S=k()?Reflect.construct:function(t,n,e){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(t,r));return e&&A(o,e.prototype),o}).apply(null,arguments)}function k(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function A(t,n){return(A=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}var O=navigator.hardwareConcurrency>4;function R(t,n){t.zoom_fact=n,t.px_ax_len=Math.abs(t.axis_len_y/t.px_height/Math.pow(1.16,t.zoom_fact-1))}var j=S((function t(n,e,r,o,i,a){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.iter_max=n,this.zoom_fact=e,this.px_width=~~(window.innerWidth*window.devicePixelRatio),this.px_height=~~(window.innerHeight*window.devicePixelRatio),this.px_num=this.px_width*this.px_height,this.px_ax_len=a/this.px_height,this.axis_len_x=a*(this.px_width/this.px_height),this.axis_len_y=a,this.worker_num=r,this.task_num=o,this.batch_num=i}),[2e3,1,navigator.hardwareConcurrency*(O?2:1),O?48:8,4,4]);function E(t){return function(t){if(Array.isArray(t))return M(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return M(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return M(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function I(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var q=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.arr=[]}var n,e,r;return n=t,(e=[{key:"enq",value:function(t){var n;t&&(n=this.arr).push.apply(n,E(t))}},{key:"deq",value:function(){if(this.arr[0])return this.arr.shift()}},{key:"deq_n",value:function(t){for(var n=[],e=0;e<t;e++)this.arr[0]&&n.push(this.arr.shift());return n}},{key:"peek",value:function(){return this.arr[0]}},{key:"clear",value:function(){this.arr.length=0}},{key:"len",value:function(){return this.arr.length}},{key:"shuffle",value:function(){for(var t=this.arr.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),e=[this.arr[n],this.arr[t]];this.arr[t]=e[0],this.arr[n]=e[1]}}}])&&I(n.prototype,e),r&&I(n,r),t}();function z(t,n,e,r,o){return{px_ax_len:t,bytes:null,top:n,left:e,bot:r,right:o}}function C(){return x||(x=!0,b={},w=h(),b=function(t){var n=w.getBundleURL()+t;return w.getOrigin(n)===self.location.origin?n:URL.createObjectURL(new Blob(["importScripts("+JSON.stringify(n)+");"]))}),b}var H,L=!1;function U(){return L||(L=!0,H={},H=C()(m()("b2a3d5bd9ac83541","27b0ff24fab2de3a"))),H}function B(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,n){if(!t)return;if("string"==typeof t)return F(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return F(t,n)}(t))){var n=0,e=function(){};return{s:e,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,i=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function F(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var P,T=(P=e)&&P.__esModule?P.default:P;console.log(T),console.log(j);var D,W,$,J,N,Z=WebAssembly.compileStreaming(fetch(T)),Y=document.querySelector("canvas"),G=Y.getContext("2d"),K=new q,Q=[];function V(){console.time(),D=!1,K.clear(),K.enq(function(){for(var t=Math.floor(j.px_height/j.task_num),n=Math.ceil(j.px_width/t),e=Math.ceil(j.px_height/t),r=[],o=0;o<e-1;o++)for(var i=0;i<n-1;i++)r.push(z(j.px_ax_len,o*t-1,i*t-1,(o+1)*t-1,(i+1)*t-1));for(var a=0;a<e-1;a++)r.push(z(j.px_ax_len,a*t-1,j.px_width-t,(a+1)*t-1,j.px_width));for(var u=0;u<n-1;u++)r.push(z(j.px_ax_len,j.px_height-t,u*t-1,j.px_height,(u+1)*t-1));var f=z(j.px_ax_len,(e-1)*t-1,(n-1)*t-1,j.px_height,j.px_width);return r.push(f),r}()),K.shuffle();var t,n=B(Q);try{for(n.s();!(t=n.n()).done;){var e=t.value;K.peek()&&e.postMessage(K.deq_n(j.batch_num))}}catch(t){n.e(t)}finally{n.f()}}Y.width=j.px_width,Y.height=j.px_height,Y.style.width="".concat(window.innerWidth,"px"),Y.style.height="".concat(window.innerHeight,"px"),window.addEventListener("wheel",(W=V,$=function(t){t.deltaY<0?(R(j,j.zoom_fact+1),console.log("".concat(100*j.zoom_fact,"% Zoom")),W()):j.zoom_fact>1&&(R(j,j.zoom_fact-1),console.log("".concat(100*j.zoom_fact,"% Zoom")),W())},J=50,function(){N||($.apply(void 0,arguments),N=setTimeout((function(){return N=!1}),J))})),Z.then((function(t){!function(t){for(var n=function(n){var e=new Worker(U(),{type:"module"});e.addEventListener("message",(function(t){var n,r=B(t.data);try{var o=function(){var t=n.value;t.px_ax_len===j.px_ax_len&&window.requestAnimationFrame((function(){G.putImageData(new ImageData(t.bytes,t.right-t.left,t.bot-t.top),t.left,t.top)}))};for(r.s();!(n=r.n()).done;)o()}catch(t){r.e(t)}finally{r.f()}K.peek()?e.postMessage(K.deq_n(j.batch_num)):D||(D=!0,console.timeEnd())})),e.postMessage([j,t]),Q.push(e)},e=0;e<j.worker_num;e++)n()}(t),V()}))}();
//# sourceMappingURL=main.51da864a.js.map
