!function(){var t={};var e=function(e){var n=t[e];if(null==n)throw new Error("Could not resolve bundle with id "+e);return n};function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(function(e){for(var n=Object.keys(e),r=0;r<n.length;r++)t[n[r]]=e[n[r]]})(JSON.parse('{"1155df4c77cdcfa0":"app.4003447f.js","1a992f7aa8090575":"foo.13aaa2d2.wasm","df6cfa3ddc808332":"worker.425d5306.js"}'));var r,i,o=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.iterations=e,this.zoom_factor=n,this.worker_num=r,this.task_num=i,this.axis_length_y=o,this.width=window.innerWidth,this.height=window.innerHeight,this.pixel_ratio=window.devicePixelRatio,this.real_width=~~(this.width*this.pixel_ratio),this.real_height=~~(this.height*this.pixel_ratio),this.pixel_num=this.real_height*this.real_width,this.axis_length_x=this.axis_length_y*(this.real_width/this.real_height),this.pixel_length=this.axis_length_y/this.real_height/Math.max(this.zoom_factor-1,1)*.8}var e,r,i;return e=t,(r=[{key:"set_zoom",value:function(t){this.zoom_factor=t,this.pixel_length=Math.abs(this.axis_length_y/this.real_height/this.zoom_factor)}}])&&n(e.prototype,r),i&&n(e,i),t}(),a=navigator.hardwareConcurrency>4,l=new o(2e3,1,navigator.hardwareConcurrency*(a?2:1),26,4),h=!1;function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=function t(e,n,r,i,o){u(this,t),this.top=e,this.left=n,this.bot=r,this.right=i,this.pixel_length=o},s=function(){function t(){u(this,t),this.head=null,this.tail=null}var e,n,r;return e=t,(n=[{key:"enq",value:function(t){this.head?(this.tail.next={next:null,val:t},this.tail=this.tail.next):(this.head={next:null,val:t},this.tail=this.head)}},{key:"deq",value:function(){if(this.head){var t=this.head;return this.head===this.tail?(this.head=null,this.tail=null):this.head=this.head.next,t.val}}},{key:"peek",value:function(){return this.head}},{key:"clear",value:function(){this.head&&(this.head=null,this.tail=null)}}])&&c(e.prototype,n),r&&c(e,r),t}();function d(){return h||(h=!0,r={},i=S(),r=function(t){var e=i.getBundleURL()+t;return i.getOrigin(e)===self.location.origin?e:URL.createObjectURL(new Blob(["importScripts("+JSON.stringify(e)+");"]))}),r}var g,_,v,p,m,w,y=!1,x=!1;function b(){return p||(p=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return z(t[0])}return"/"}()),p}function z(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}function k(t){let e=(""+t).match(/(https?|file|ftp):\/\/[^/]+/);if(!e)throw new Error("Origin not found");return e[0]}function S(){return x||(x=!0,p=null,(v={}).getBundleURL=b,m=z,v.getBaseURL=m,w=k,v.getOrigin=w),v}var A,E,O,R,j=!1;function q(t){if(""===t)return".";var e="/"===t[t.length-1]?t.slice(0,t.length-1):t,n=e.lastIndexOf("/");return-1===n?".":e.slice(0,n)}function M(t,e){if(t===e)return"";var n=t.split("/");"."===n[0]&&n.shift();var r,i,o=e.split("/");for("."===o[0]&&o.shift(),r=0;(r<o.length||r<n.length)&&null==i;r++)n[r]!==o[r]&&(i=r);var a=[];for(r=0;r<n.length-i;r++)a.push("..");return o.length>i&&a.push.apply(a,o.slice(i)),a.join("/")}function H(){return j||(j=!0,A={},E=e,A=function(t,e){return M(q(E(t)),E(e))},O=q,A._dirname=O,R=M,A._relative=R),A}function L(){return y||(y=!0,g={},g=d()(H()("1155df4c77cdcfa0","df6cfa3ddc808332"))),g}function T(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}_=S().getBundleURL()+H()("1155df4c77cdcfa0","1a992f7aa8090575");var C,I=(C=_)&&C.__esModule?C.default:C;console.log(I),console.log(l);var B,D,F=WebAssembly.compileStreaming(fetch(I)),P=document.querySelector("canvas"),W=P.getContext("2d"),$=[],J=new s;function N(){console.time(),D=!1,J.clear();for(var t=Math.floor(l.real_height/l.task_num),e=Math.ceil(l.real_width/t),n=Math.ceil(l.real_height/t),r=0;r<n-1;r++)for(var i=0;i<e-1;i++){var o=new f(r*t-1,i*t-1,(r+1)*t-1,(i+1)*t-1,l.pixel_length);J.enq(o)}for(var a=0;a<n-1;a++){var h=new f(a*t-1,l.real_width-t,(a+1)*t-1,l.real_width,l.pixel_length);J.enq(h)}for(var c=0;c<e-1;c++){var u=new f(l.real_height-t,c*t-1,l.real_height,(c+1)*t-1,l.pixel_length);J.enq(u)}var s=new f((n-1)*t-1,(e-1)*t-1,l.real_height,l.real_width,l.pixel_length);J.enq(s);var d,g=T($);try{for(g.s();!(d=g.n()).done;){var _=d.value;J.peek()&&_.postMessage(J.deq())}}catch(t){g.e(t)}finally{g.f()}}F.then((function(t){var e;e=window.devicePixelRatio,P.width=l.width*e,P.height=l.height*e,P.style.width="".concat(window.innerWidth,"px"),P.style.height="".concat(window.innerHeight,"px"),B=W.createImageData(l.real_width,l.real_height),new Uint32Array(B.data.buffer),function(t){for(var e=function(t){var e=new Worker(L(),{type:"module"});e.addEventListener("message",(function(t){var n=t.data;if(n.pixel_length===l.pixel_length&&window.requestAnimationFrame((function(){W.putImageData(new ImageData(n.bytes,n.right-n.left,n.bot-n.top),n.left,n.top)})),J.peek()){var r=J.deq();r&&e.postMessage(r)}else D||(D=!0,console.timeEnd())})),e.postMessage(l),$.push(e)},n=0;n<l.worker_num;n++)e()}(),N()}));var Y,Z,G,K=(Y=function(t){t.deltaY<0?(l.set_zoom(l.zoom_factor+1),console.log("".concat(100*l.zoom_factor,"% Zoom")),N()):l.zoom_factor>1&&(l.set_zoom(l.zoom_factor-1),console.log("".concat(100*l.zoom_factor,"% Zoom")),N())},Z=800,function(){G||(Y.apply(void 0,arguments),G=setTimeout((function(){return G=!1}),Z))});!function(t,e,n){var r,i,o,a,l;function h(){var c=Date.now()-a;c<e&&c>=0?r=setTimeout(h,e-c):(r=null,n||(l=t.apply(o,i),o=i=null))}null==e&&(e=100);var c=function(){o=this,i=arguments,a=Date.now();var c=n&&!r;return r||(r=setTimeout(h,e)),c&&(l=t.apply(o,i),o=i=null),l};c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(l=t.apply(o,i),o=i=null,clearTimeout(r),r=null)}}((function(t){t.deltaY<0?(console.log(l.zoom_factor),l.set_zoom(l.zoom_factor+1),console.log(l.zoom_factor),N()):l.zoom_factor>1&&(console.log(l.zoom_factor),l.set_zoom(l.zoom_factor-1),console.log(l.zoom_factor),N())}),1e3,!0);window.addEventListener("wheel",K)}();
//# sourceMappingURL=app.4003447f.js.map
